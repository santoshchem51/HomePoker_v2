<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PokePot Epic 1 - Visual Validation Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .phone-header {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
            padding: 15px;
            text-align: center;
        }
        .status-bar {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            margin-bottom: 10px;
            opacity: 0.9;
        }
        .screen {
            padding: 20px;
            min-height: 500px;
        }
        .title {
            font-size: 28px;
            font-weight: bold;
            color: #2196F3;
            text-align: center;
            margin-bottom: 10px;
        }
        .subtitle {
            font-size: 16px;
            color: #666;
            text-align: center;
            margin-bottom: 30px;
        }
        .feature-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .feature {
            color: #4CAF50;
            margin: 8px 0;
            font-size: 14px;
        }
        .feature:before {
            content: "âœ… ";
        }
        .btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            width: 100%;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px 0;
            transition: background 0.2s;
        }
        .btn:hover {
            background: #1976D2;
        }
        .btn.success {
            background: #4CAF50;
        }
        .btn.success:hover {
            background: #45a049;
        }
        .btn.warning {
            background: #FF9800;
        }
        .btn.warning:hover {
            background: #f57c00;
        }
        .btn.whatsapp {
            background: #25D366;
        }
        .btn.whatsapp:hover {
            background: #128C7E;
        }
        .session-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
        }
        .nav-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 20px 0;
        }
        .nav-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
        }
        .player-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: border-color 0.2s;
        }
        .player-card:hover {
            border-color: #2196F3;
        }
        .player-card.selected {
            border-color: #2196F3;
        }
        .player-name {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }
        .player-balance {
            font-size: 16px;
            color: #2196F3;
            font-weight: bold;
        }
        .player-stats {
            font-size: 14px;
            color: #666;
        }
        .input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 16px;
            box-sizing: border-box;
        }
        .transaction-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 10px 0;
        }
        .btn.buy-in {
            background: #4CAF50;
        }
        .btn.cash-out {
            background: #F44336;
        }
        .transaction-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #2196F3;
        }
        .transaction-player {
            font-weight: bold;
            color: #333;
        }
        .transaction-amount {
            font-size: 16px;
            font-weight: bold;
        }
        .transaction-amount.buy-in {
            color: #4CAF50;
        }
        .transaction-amount.cash-out {
            color: #F44336;
        }
        .whatsapp-preview {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
            line-height: 1.5;
            white-space: pre-wrap;
        }
        .hidden {
            display: none;
        }
        .demo-badge {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #FF5722;
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="demo-badge">Epic 1 Demo</div>
    
    <div class="container">
        <div class="phone-header">
            <div class="status-bar">
                <span>ðŸ“¶ 7:30 PM</span>
                <span>ðŸ”‹ 85%</span>
            </div>
            <div style="font-size: 18px; font-weight: bold;">PokePot - Visual Demo</div>
        </div>

        <!-- Home Screen -->
        <div id="home" class="screen">
            <div class="title">ðŸŽ° PokePot</div>
            <div class="subtitle">Epic 1 Demo - Foundation & Core Infrastructure</div>
            
            <div class="feature-list">
                <div style="font-weight: bold; margin-bottom: 10px;">Epic 1 Features Implemented:</div>
                <div class="feature">Project Setup & Development Environment</div>
                <div class="feature">Database Foundation & Session Management</div>
                <div class="feature">Player Management & Session Participation</div>
                <div class="feature">Buy-in & Cash-out Transaction Tracking</div>
                <div class="feature">Real-time Balance Calculations</div>
                <div class="feature">WhatsApp Integration for Sharing Results</div>
                <div class="feature">Session Lifecycle & Data Cleanup</div>
            </div>

            <div id="session-status" class="session-info hidden">
                <div><strong>Session:</strong> Friday Night Poker (created)</div>
                <div><strong>Players:</strong> <span id="player-count">0</span> | <strong>Total Pot:</strong> $<span id="total-pot">0.00</span></div>
            </div>

            <button class="btn" onclick="createSession()">Create New Session</button>
            <button id="continue-btn" class="btn hidden" onclick="showScreen('session')">Continue Session</button>
        </div>

        <!-- Session Management Screen -->
        <div id="session" class="screen hidden">
            <div class="title">Session: Friday Night Poker</div>
            <div class="subtitle">Status: <span id="session-status-text">created</span> | Pot: $<span id="session-pot">0.00</span></div>
            
            <div class="nav-buttons">
                <button class="nav-btn" onclick="showScreen('players')">Players (<span id="nav-player-count">0</span>)</button>
                <button class="nav-btn" onclick="showScreen('transactions')">Transactions (<span id="nav-transaction-count">0</span>)</button>
                <button class="nav-btn" onclick="showScreen('whatsapp')">WhatsApp Share</button>
            </div>

            <button id="start-session-btn" class="btn success hidden" onclick="startSession()">Start Session</button>
            <button id="complete-session-btn" class="btn warning hidden" onclick="completeSession()">Complete Session</button>
            
            <button class="btn" style="background: #666;" onclick="showScreen('home')">Back to Home</button>
        </div>

        <!-- Player Management Screen -->
        <div id="players" class="screen hidden">
            <div class="title">Player Management</div>
            
            <div id="add-player-section">
                <div style="font-weight: bold; margin-bottom: 10px;">Add New Player:</div>
                <input type="text" id="player-name" class="input" placeholder="Player Name">
                <button class="btn" onclick="addPlayer()">Add Player</button>
            </div>

            <div id="players-list"></div>

            <div id="transaction-section" class="hidden">
                <div style="font-weight: bold; margin: 20px 0 10px;">Record Transaction:</div>
                <input type="number" id="transaction-amount" class="input" placeholder="Amount">
                <div class="transaction-buttons">
                    <button class="btn buy-in" onclick="recordTransaction('buy_in')">Buy In</button>
                    <button class="btn cash-out" onclick="recordTransaction('cash_out')">Cash Out</button>
                </div>
            </div>

            <button class="btn" style="background: #666;" onclick="showScreen('session')">Back to Session</button>
        </div>

        <!-- Transaction History Screen -->
        <div id="transactions" class="screen hidden">
            <div class="title">Transaction History</div>
            
            <div id="transactions-list">
                <div style="text-align: center; color: #666; margin: 50px 0;">No transactions yet</div>
            </div>

            <button class="btn" style="background: #666;" onclick="showScreen('session')">Back to Session</button>
        </div>

        <!-- WhatsApp Share Screen -->
        <div id="whatsapp" class="screen hidden">
            <div class="title">WhatsApp Share</div>
            
            <div class="whatsapp-preview" id="whatsapp-message">ðŸŽ¯ Poker Night Results - Friday Night Poker
ðŸ’° Total Pot: $0.00

ðŸ‘¥ Player Summary:
(No players added yet)

ðŸ”— Shared via PokePot (Epic 1 Demo)</div>

            <button class="btn whatsapp" onclick="shareWhatsApp()">ðŸ“± Share via WhatsApp</button>

            <button class="btn" style="background: #666;" onclick="showScreen('session')">Back to Session</button>
        </div>
    </div>

    <script>
        // Demo state
        let currentSession = null;
        let players = [];
        let transactions = [];
        let selectedPlayer = null;

        function showScreen(screenName) {
            // Hide all screens
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.add('hidden');
            });
            
            // Show selected screen
            document.getElementById(screenName).classList.remove('hidden');
        }

        function createSession() {
            currentSession = {
                id: 'session_' + Date.now(),
                name: 'Friday Night Poker',
                status: 'created',
                totalPot: 0
            };
            
            document.getElementById('session-status').classList.remove('hidden');
            document.getElementById('continue-btn').classList.remove('hidden');
            
            showScreen('session');
            updateUI();
        }

        function addPlayer() {
            const nameInput = document.getElementById('player-name');
            const name = nameInput.value.trim();
            
            if (!name) {
                alert('Please enter a player name');
                return;
            }
            
            if (players.find(p => p.name.toLowerCase() === name.toLowerCase())) {
                alert('Player with this name already exists');
                return;
            }
            
            const player = {
                id: 'player_' + Date.now(),
                name: name,
                balance: 0,
                totalBuyIns: 0,
                totalCashOuts: 0
            };
            
            players.push(player);
            nameInput.value = '';
            
            updatePlayersDisplay();
            updateUI();
            
            alert(`${name} added to session!`);
        }

        function selectPlayer(playerId) {
            selectedPlayer = playerId;
            updatePlayersDisplay();
            
            if (currentSession && currentSession.status === 'active') {
                document.getElementById('transaction-section').classList.remove('hidden');
            }
        }

        function recordTransaction(type) {
            const amountInput = document.getElementById('transaction-amount');
            const amount = parseFloat(amountInput.value);
            
            if (!selectedPlayer || !amount || amount <= 0) {
                alert('Please select a player and enter a valid amount');
                return;
            }
            
            const player = players.find(p => p.id === selectedPlayer);
            if (!player) return;
            
            if (type === 'cash_out' && amount > player.balance) {
                alert('Insufficient balance for cash-out');
                return;
            }
            
            const transaction = {
                id: 'txn_' + Date.now(),
                playerId: selectedPlayer,
                playerName: player.name,
                type: type,
                amount: amount,
                timestamp: new Date()
            };
            
            // Update player
            if (type === 'buy_in') {
                player.balance += amount;
                player.totalBuyIns += amount;
                currentSession.totalPot += amount;
            } else {
                player.balance -= amount;
                player.totalCashOuts += amount;
                currentSession.totalPot -= amount;
            }
            
            transactions.unshift(transaction);
            amountInput.value = '';
            
            updatePlayersDisplay();
            updateTransactionsDisplay();
            updateWhatsAppMessage();
            updateUI();
            
            alert(`${type === 'buy_in' ? 'Buy-in' : 'Cash-out'} recorded for ${player.name}`);
        }

        function startSession() {
            if (players.length < 2) {
                alert('Need at least 2 players to start');
                return;
            }
            
            currentSession.status = 'active';
            document.getElementById('add-player-section').style.display = 'none';
            updateUI();
            alert('Session started!');
        }

        function completeSession() {
            currentSession.status = 'completed';
            document.getElementById('transaction-section').classList.add('hidden');
            updateUI();
            alert('Session completed! Data cleanup will occur automatically in 10 hours.');
        }

        function shareWhatsApp() {
            alert('Message copied to clipboard!\n\n(In real app, this opens WhatsApp)');
        }

        function updatePlayersDisplay() {
            const playersList = document.getElementById('players-list');
            playersList.innerHTML = '';
            
            players.forEach(player => {
                const div = document.createElement('div');
                div.className = `player-card ${selectedPlayer === player.id ? 'selected' : ''}`;
                div.onclick = () => selectPlayer(player.id);
                div.innerHTML = `
                    <div class="player-name">${player.name}</div>
                    <div class="player-balance">Balance: $${player.balance.toFixed(2)}</div>
                    <div class="player-stats">Buy-ins: $${player.totalBuyIns.toFixed(2)} | Cash-outs: $${player.totalCashOuts.toFixed(2)}</div>
                `;
                playersList.appendChild(div);
            });
        }

        function updateTransactionsDisplay() {
            const transactionsList = document.getElementById('transactions-list');
            
            if (transactions.length === 0) {
                transactionsList.innerHTML = '<div style="text-align: center; color: #666; margin: 50px 0;">No transactions yet</div>';
                return;
            }
            
            transactionsList.innerHTML = '';
            transactions.forEach(txn => {
                const div = document.createElement('div');
                div.className = 'transaction-card';
                div.innerHTML = `
                    <div class="transaction-player">${txn.playerName}</div>
                    <div class="transaction-amount ${txn.type}">${txn.type === 'buy_in' ? '+' : '-'}$${txn.amount.toFixed(2)} (${txn.type.replace('_', ' ')})</div>
                    <div style="font-size: 12px; color: #666;">${txn.timestamp.toLocaleTimeString()}</div>
                `;
                transactionsList.appendChild(div);
            });
        }

        function updateWhatsAppMessage() {
            let message = `ðŸŽ¯ Poker Night Results - ${currentSession ? currentSession.name : 'Friday Night Poker'}\n`;
            message += `ðŸ’° Total Pot: $${currentSession ? currentSession.totalPot.toFixed(2) : '0.00'}\n\n`;
            message += `ðŸ‘¥ Player Summary:\n`;
            
            if (players.length === 0) {
                message += '(No players added yet)\n';
            } else {
                players.forEach(player => {
                    const netPosition = player.totalCashOuts - player.totalBuyIns;
                    const sign = netPosition >= 0 ? '+' : '';
                    message += `â€¢ ${player.name}: $${player.totalBuyIns.toFixed(0)} in â†’ $${player.totalCashOuts.toFixed(0)} out = ${sign}$${netPosition.toFixed(0)}\n`;
                });
            }
            
            message += '\nðŸ”— Shared via PokePot (Epic 1 Demo)';
            document.getElementById('whatsapp-message').textContent = message;
        }

        function updateUI() {
            if (!currentSession) return;
            
            // Update counters
            document.getElementById('player-count').textContent = players.length;
            document.getElementById('total-pot').textContent = currentSession.totalPot.toFixed(2);
            document.getElementById('session-pot').textContent = currentSession.totalPot.toFixed(2);
            document.getElementById('nav-player-count').textContent = players.length;
            document.getElementById('nav-transaction-count').textContent = transactions.length;
            document.getElementById('session-status-text').textContent = currentSession.status;
            
            // Show/hide buttons based on session status
            const startBtn = document.getElementById('start-session-btn');
            const completeBtn = document.getElementById('complete-session-btn');
            
            if (currentSession.status === 'created' && players.length >= 2) {
                startBtn.classList.remove('hidden');
            } else {
                startBtn.classList.add('hidden');
            }
            
            if (currentSession.status === 'active') {
                completeBtn.classList.remove('hidden');
            } else {
                completeBtn.classList.add('hidden');
            }
            
            updateWhatsAppMessage();
        }

        // Initialize
        updateWhatsAppMessage();
    </script>
</body>
</html>